Replication and sharding are features in MongoDB for ensuring data availability and scalability. Replication duplicates data across multiple servers for reliability and fault tolerance, while sharding distributes data across servers to handle large datasets and improve performance. Together, they make MongoDB scalable, resilient, and efficient for high-traffic applications.

Replication in MongoDB?
Replication in MongoDB is the process of creating multiple copies of data across different servers to ensure data redundancy, high availability, and fault tolerance. A replica set is a group of MongoDB servers that maintain the same dataset.

Primary Node: Handles all write operations and replicates data to secondary nodes.
Secondary Nodes: Maintain copies of the data and can serve read operations to improve performance.
Note: By using replication, MongoDB protects against data loss, ensures continuous availability even if a server fails, and allows read scaling by distributing queries across secondary nodes.

mongo_db
Replication in MongoDB
Features of Replication
Replica Sets: Replica sets consist of multiple nodes (usually an odd number for elections) that contain identical copies of the data.
Write and Read Operations: The primary node handles write operations, while secondary nodes provide read scaling by distributing read queries.
Automatic Failover: If the primary node goes down, a secondary node is automatically promoted to primary, ensuring continuous availability.
Oplog: A special capped collection on the primary node that records all changes. The secondary nodes use this log to keep themselves updated.
Set Up Replication in MongoDB
Setting up replication in MongoDB involves configuring a replica set, where multiple servers maintain the same copy of data to ensure high availability and fault tolerance. Here's a clear, step-by-step guide to perform replication:

1. Start MongoDB with Replica Set Configuration
The first step is to start your MongoDB instance with the --replSet option. This option is used to specify the name of the replica set and ensure MongoDB operates in replication mode.

Run the following command in the terminal:

mongod --port "PORT" --dbpath "YOUR_DB_DATA_PATH" --replSet "REPLICA_SET_INSTANCE_NAME"
<PORT>: The port on which your MongoDB instance will run.
<YOUR_DB_PATH>: The directory where your MongoDB data will be stored.
<REPLICA_SET_NAME>: The name of your replica set (e.g., rs0).
2. Initiate the Replica Set
Once the MongoDB instance is running with the replication option, the next step is to initiate the replica set. This step configures MongoDB to treat this instance as part of a replica set.

Open the MongoDB shell and run the following command:

rs.initiate()
This will initiate the replica set and assign the current node as the primary node.

3. Add Secondary Members to the Replica Set
After initiating the replica set, you need to add secondary nodes (replica members) to replicate the data. These secondary members will asynchronously replicate the data from the primary node.

To add a secondary member, use the following command in the Mongo shell:

rs.add("<secondary_member_address>")
4. Automate Setup with a Script (Optional)
You can automate the creation of the replica set using a shell script. For example, create a create_replicaset.sh script that contains the commands to start MongoDB and configure the replica set.

Example script (create_replicaset.sh): 

creating replica set in mongodb
Then run the following script :

./create_replicaset.sh
Directories will be created and then run the mongo.
In the Mongo terminal, use the command rs.initiate() to initiate a new replica set.
performing replication in mongodb
MongoDB Sharding
Sharding in MongoDB is the process of horizontally partitioning data across multiple servers to handle large datasets and high-traffic applications efficiently. Each partition of data is called a shard, and together the shards form a sharded cluster.

Shards: Store subsets of the data.
Config Servers: Maintain metadata about the cluster and data distribution.
Query Routers (Mongos): Direct client requests to the appropriate shard(s).
How to Set Up Sharding in MongoDB
To implement sharding, the following components must be configured:

Shard Servers: Start MongoDB instances as shards by running them as replica sets.
Config Servers: Set up config servers to store metadata and routing information for the sharded cluster.
Query Routers (mongos): Configure the query routers to handle client requests and direct them to the appropriate shard.
MongoDB uses shard keys to determine how data is distributed across shards. The shard key must be chosen wisely to ensure an even distribution of data. Common approaches include using fields with high cardinality, such as a user ID or timestamp.

replication and sharding diagram
Replication vs. Sharding
Here is a detailed comparison between Replication and Sharding in MongoDB:

Replication	Sharding
Data redundancy and high availability	Horizontal scaling for large datasets
Copies data across multiple servers	Splits data across multiple servers (shards)
Primary and secondary nodes	Shards, config servers, query routers (mongos)
Primary handles writes; secondaries can handle reads	Each shard handles part of the data; queries routed to appropriate shards
Fault tolerance, data backup, read scaling	Performance, scalability, storage capacity
Reliability and availability	Managing large datasets efficiently
